<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
  <title>singleton</title> 
  <style type="text/css" media="screen">
  
  </style>
  <script type="text/javascript" src="../vendor/jquery.js"></script>
  <script type="text/javascript" src="../lib/samantha.js"></script>
  <script type="text/javascript" charset="utf-8">

// --------------------------- example 1

    MyRouter = function(value, reset){
      
      // var instance = (reset) ? true : false;
      var instance;
      var val;
      
      function constructor() {
        this._routes = [];
        this.val = value;
      };
      
      return {
        getInstance: function() {
          if (!instance) {
            instance = new constructor();
          };
          return instance;
        },
        route: function(x) {
          this._routes.push(x);
        }
      };
      
      // if (reset) {
      //   console.log('BEFORE', this._routes);
      //   this._routes = [];
      //   console.log('AFTER', this._routes);
      // } else {
      //   console.log('ELSE');
      // };
      // this.init();
    };
    
    // MyRouter.prototype = {
    //   _routes: []
    // };

    var x = MyRouter('x').getInstance();
    // x.route('1');
    console.log(x);
    var y = MyRouter('y').getInstance();
    // x.route('2');
    console.log(y);
    var z = MyRouter('z').getInstance();
    // x.route('3');
    console.log(z);
  
    // var x = new MyRouter.getInstance();
    // var y = new MyRouter.getInstance();
    // var z = new MyRouter.getInstance();

// --------------------------- example 2

      function RoutesSingleton() {};
        
      RoutesSingleton.prototype = {
        _routes: [],
        add: function(x) {
          this._routes.push(x);
        },
        remove: function(x) {
          this._routes.pop(x);
        },
        log: function(x) {
          console.log(this._routes.join(', '));
        }
      };  

      var x = new RoutesSingleton();
      var y = new RoutesSingleton();
      
      x.add('xxx');
      y.add('yyy');
      x.add('yyy');
      
      x.log();
      y.log();
      
      console.log(x.log() === y.log());
                  
  </script>
</head>
<body>
  
<p>(<a href="singleton.html" class="ignore">reset</a>)</p>

</body>
</html>
