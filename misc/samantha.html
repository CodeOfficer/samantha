<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
  <title>Event Order</title> 
  <style type="text/css" media="screen">
    .left {
      width: 50%;
      position: relative;
      float: left;
      background-color: #ddd;
    }
    .right {
      width: 50%;
      position: relative;
      float: left;
      background-color: #FF8000;      
    }
    .row {
      margin-bottom: 1em;
    }
    .clear {
      clear: both;
    }
    .param {
      color: #FF0000;
    }
  </style>
  <script type="text/javascript" src="../vendor/jquery.js"></script>
  <script type="text/javascript" src="../lib/samantha.js"></script>
  <script type="text/javascript" charset="utf-8">
    // var app;
    //   
    // ;(function($) {
    //   
    //   app = $.samantha(function() { with(this) {
    //       
    //       // get('#/', function() { with(this) {
    //       //   $('#main').text('');
    //       // }});
    //       //         
    //       // get('#/click1', function() { with(this) {
    //       //   $('#main').text('Hello World');
    //       // }});
    //       
    //   }});
    // 
    //   $(function() {
    //     // app.run('#/');
    //     console.log(app);
    //   });
    //   
    // })(jQuery);
    
var observable = { 

  addObserver: function(observer) {
      if (!this.observers) {
          this.observers = [];
      }
      this.observers.push(observer);
  },
  
  notifyObservers: function() {
      if (!this.observers) {
          return;
      }
      for (var i=0; i<this.observers.length; i++) {
          this.observers[i].update();
      }
  },

  mixin: function(subject) {
      for (var p in observable) {
          if (p=='mixin') {
              continue;
          }
          subject[p] = observable[p];
      }
  }

};

// ---------------------------

function WeatherModel() {}

observable.mixin(WeatherModel.prototype);

WeatherModel.prototype.setTemperature = function(temp) {
    this.temp = temp;
    this.notifyObservers();
};

WeatherModel.prototype.getTemperature = function() {
    return this.temp;
};

// ---------------------------

function CurrentConditionsView(model) {
    this.model = model;
    model.addObserver(this);
}

CurrentConditionsView.prototype.update = function() {
    console.log(this.model.getTemperature());
};

// ---------------------------

var victoriaWeather = new WeatherModel();
var victoriaNews = new CurrentConditionsView(victoriaWeather);

victoriaWeather.setTemperature(15.3);
victoriaWeather.setTemperature(17.0);
victoriaWeather.setTemperature(14.7);
  </script>
</head>
<body>
  
<p>(<a href="samantha.html" class="ignore">reset</a>)</p>

<div class="row">
  
  <div class="left">
    <form action="#/post" method="post" accept-charset="utf-8">
      <p><input type="submit" value="Post &rarr;"/></p>
    </form>
  
    <form action="#/get" method="get" accept-charset="utf-8">  
      <p><input type="submit" value="Get &rarr;"/></p>
    </form>
  
    <form action="#/put" method="put" accept-charset="utf-8">
      <p><input type="submit" value="Put &rarr;"/></p>
    </form>
  
    <form action="#/delete" method="delete" accept-charset="utf-8">
      <p><input type="submit" value="Delete &rarr;"/></p>
    </form>
    <p><a href="#/click1">click me #1!</a></p>
    <p><a href="#/click2">click me #2!</a></p>
  </div>

  <div class="right">
    <form action="#/post_ignore" method="post" accept-charset="utf-8" class="ignore">
      <p><input type="submit" value="Post (ignore) &rarr;"/></p>
    </form>

    <form action="#/get_ignore" method="get" accept-charset="utf-8" class="ignore">  
      <p><input type="submit" value="Get (ignore) &rarr;"/></p>
    </form>

    <p><a href="#click1_ignore">click me #1! (ignore)</a></p>
    <p><a href="#click2_ignore">click me #2! (ignore)</a></p>
  </div>
  
  <div class="clear"></div>
  
</div>

</body>
</html>


